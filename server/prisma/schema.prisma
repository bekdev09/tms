generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  MANAGER
  EMPLOYEE
}

enum TaskStatus {
  PENDING
  ASSIGNED
  IN_PROGRESS
  COMPLETED
  OVERDUE
}

enum Priority {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum UserStatus {
  ACTIVE
  INACTIVE
}

model User {
  id         String     @id @default(cuid())
  username   String     @unique
  firstname  String
  lastname   String
  patronymic String
  email      String     @unique
  phone      String     @unique
  password   String
  role       Role       @default(EMPLOYEE)
  status     UserStatus @default(ACTIVE)
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  tasks      Task[]     @relation("TaskAssignee")
  // histories TaskHistory[]
  // notifications Notification[]
}

model Task {
  id          String     @id @default(cuid())
  title       String
  description String
  assigneeId  String
  assignee    User       @relation("TaskAssignee", fields: [assigneeId], references: [id])
  priority    Priority   @default(MEDIUM)
  status      TaskStatus @default(IN_PROGRESS)
  deadline    DateTime?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  // histories taskHistory[]
}
